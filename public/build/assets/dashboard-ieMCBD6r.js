import{j as e,r as c,a as m,u as y,H as b}from"./app-CTMTIvB5.js";import{C as j,A as v}from"./app-layout-DKAtZx4E.js";import{I as g}from"./index-BYES9Z1C.js";import{a as d}from"./createLucideIcon-Bx8aC_0m.js";import{D as k,a as w}from"./dialog-B5A1G59X.js";/* empty css            */import"./index-R8zX_sQ4.js";import"./index-DUeDnvvb.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M=d("ChevronLeft",N);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],C=d("EllipsisVertical",_);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],I=d("Pen",P);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],L=d("Plus",E);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],O=d("Share2",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],z=d("Trash2",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],D=d("WifiOff",A);function x({Icon:n,onClick:t}){return e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center bg-white/15 hover:bg-white/25 rounded-full text-white transition-all duration-300",children:e.jsx(n,{size:12})})}function H({isHovered:n,memeId:t}){const[a,s]=c.useState(!1);c.useEffect(()=>{n||s(!1)},[n]);const r=new g().v1().meme(),i=async l=>{l.stopPropagation(),await r.delete(t)},u=l=>{l.stopPropagation(),m.visit(route("meme.edit",t))};return e.jsxs("div",{className:`absolute top-0 left-0 w-full h-15% bg-black/40 backdrop-blur-sm flex justify-end items-start px-2 transition-transform duration-300 ${n?"translate-y-0":"-translate-y-full"}`,children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),s(!0)},className:`text-white p-2 hover:bg-white/20 rounded-full mt-1 transition-opacity duration-200 ${a?"opacity-0 pointer-events-none":"opacity-100"}`,children:e.jsx(C,{size:12})}),e.jsxs("div",{className:`flex items-center gap-2 pr-2 transition-all duration-300 ${a?"translate-x-0 opacity-100":"translate-x-10 opacity-0 pointer-events-none"}`,children:[e.jsx(x,{Icon:I,onClick:u}),e.jsx(x,{Icon:z,onClick:i}),e.jsx(x,{Icon:O,onClick:l=>l.stopPropagation()})]})]})}function V({isHovered:n,title:t}){return e.jsx("div",{className:`absolute bottom-0 left-0 w-full bg-black/60 text-white text-center text-sm py-2
          transition-transform duration-300 ${n?"translate-y-0":"translate-y-full"}`,children:t})}function B({id:n,title:t,image_url:a,onOpen:s}){const[r,i]=c.useState(!1);return e.jsxs("div",{className:"relative w-[198px] h-[258px] overflow-hidden rounded-lg border border-gray-300 dark:border-gray-700 bg-neutral-50 dark:bg-neutral-900 cursor-pointer",onMouseEnter:()=>i(!0),onMouseLeave:()=>{i(!1)},onClick:s,children:[e.jsx("img",{src:a,alt:t,className:`w-full h-full object-cover transition-transform duration-500 ${r?"scale-105":""}`}),e.jsx(H,{isHovered:r,memeId:n}),e.jsx(V,{isHovered:r,title:t})]},n)}function T({isOpen:n,onOpenChange:t,meme:a,onPrev:s,onNext:r,hasPrev:i,hasNext:u}){return a?e.jsx(k,{open:n,onOpenChange:t,children:e.jsxs(w,{className:"max-w-5xl bg-black/90 border border-neutral-800 p-4",children:[a.type==="video"?e.jsx("video",{src:a.media_url,controls:!0,className:"w-full max-h-[80vh] object-contain rounded-lg bg-black"}):e.jsx("img",{src:a.media_url,alt:a.title,className:"w-full max-h-[80vh] object-contain rounded-lg bg-black"}),e.jsx("button",{type:"button",onClick:s,disabled:!i,className:"absolute left-3 top-1/2 -translate-y-1/2 rounded-full border border-neutral-700 bg-black/60 p-2 text-white transition disabled:opacity-40",children:e.jsx(M,{size:20})}),e.jsx("button",{type:"button",onClick:r,disabled:!u,className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-full border border-neutral-700 bg-black/60 p-2 text-white transition disabled:opacity-40",children:e.jsx(j,{size:20})})]})}):null}function q({memes:n}){const[t,a]=c.useState(null),[s,r]=c.useState(!1),i=o=>{a(o),r(!0)},u=o=>{r(o),o||a(null)},l=()=>{t!==null&&a(Math.max(0,t-1))},p=()=>{t!==null&&a(Math.min(n.length-1,t+1))},h=t!==null?n[t]:null;return e.jsxs("div",{className:"flex justify-start p-4",children:[e.jsx("div",{className:"flex flex-wrap gap-4 w-full",children:n.map((o,f)=>e.jsx(B,{id:o.id,title:o.title,image_url:o.image_url,media_url:o.media_url,type:o.type,onOpen:()=>i(f)}))}),e.jsx(T,{isOpen:s,onOpenChange:u,meme:h,onPrev:l,onNext:p,hasPrev:t!==null&&t>0,hasNext:t!==null&&t<n.length-1})]})}const R=[{title:"Мемчики",href:"/"}],W=[{Icon:L,target_url:"/memes/new",isActive:!1}];function Z(){const{memes:n}=y().props,[t,a]=c.useState(!0);return c.useEffect(()=>{const s=()=>a(navigator.onLine);return s(),window.addEventListener("online",s),window.addEventListener("offline",s),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",s)}},[]),e.jsxs(v,{breadcrumbs:R,actions:W,children:[e.jsx(b,{title:"Meme Cloud"}),!t&&e.jsx("div",{className:"mx-4 mb-4 rounded-2xl border border-amber-200/70 bg-amber-50 px-4 py-3 text-amber-900 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-amber-100 text-amber-700",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold",children:"Нет соединения"}),e.jsx("div",{className:"text-amber-800/80",children:"Показываем сохранённые мемы и медиа."})]})]})}),e.jsx(q,{memes:n})]})}export{Z as default};
