import{j as e,r as c,a as f,u as y,H as b}from"./app-gXqGlHNq.js";import{C as g,A as k}from"./app-layout-CeiySOWF.js";import{I as v}from"./index-BU4V5GPG.js";import{a as d}from"./createLucideIcon-BqQKbMjN.js";import{D as j,a as w}from"./dialog-Bi0KWtX-.js";/* empty css            */import"./index-Cjq5TNqr.js";import"./index-CKGNssgb.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M=d("ChevronLeft",N);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],C=d("EllipsisVertical",_);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],I=d("Pen",P);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],L=d("Plus",E);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],O=d("Share2",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],z=d("Trash2",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],D=d("WifiOff",A);function m({Icon:s,onClick:t}){return e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center bg-white/15 hover:bg-white/25 rounded-full text-white transition-all duration-300",children:e.jsx(s,{size:12})})}function H({isHovered:s,memeId:t}){const[n,a]=c.useState(!1);c.useEffect(()=>{s||a(!1)},[s]);const r=new v().v1().meme(),i=async o=>{o.stopPropagation(),await r.delete(t)},u=o=>{o.stopPropagation(),f.visit(route("meme.edit",t))};return e.jsxs("div",{className:`absolute top-0 left-0 w-full h-15% bg-black/40 backdrop-blur-sm flex justify-end items-start px-2 transition-transform duration-300 ${s?"translate-y-0":"-translate-y-full"}`,children:[e.jsx("button",{onClick:o=>{o.stopPropagation(),a(!0)},className:`text-white p-2 hover:bg-white/20 rounded-full mt-1 transition-opacity duration-200 ${n?"opacity-0 pointer-events-none":"opacity-100"}`,children:e.jsx(C,{size:12})}),e.jsxs("div",{className:`flex items-center gap-2 pr-2 transition-all duration-300 ${n?"translate-x-0 opacity-100":"translate-x-10 opacity-0 pointer-events-none"}`,children:[e.jsx(m,{Icon:I,onClick:u}),e.jsx(m,{Icon:z,onClick:i}),e.jsx(m,{Icon:O,onClick:o=>o.stopPropagation()})]})]})}function V({isHovered:s,title:t}){return e.jsx("div",{className:`absolute bottom-0 left-0 w-full bg-black/60 text-white text-center text-sm py-2
          transition-transform duration-300 ${s?"translate-y-0":"translate-y-full"}`,children:t})}function B({id:s,title:t,image_url:n,onOpen:a}){const[r,i]=c.useState(!1);return e.jsxs("div",{className:"relative w-full aspect-[3/4] overflow-hidden rounded-2xl border border-gray-300 dark:border-gray-700 bg-neutral-50 dark:bg-neutral-900 cursor-pointer sm:w-[198px] sm:h-[258px] sm:aspect-auto sm:rounded-lg",onMouseEnter:()=>i(!0),onMouseLeave:()=>{i(!1)},onClick:a,children:[e.jsx("img",{src:n,alt:t,className:`w-full h-full object-cover transition-transform duration-500 ${r?"scale-105":""}`}),e.jsx(H,{isHovered:r,memeId:s}),e.jsx(V,{isHovered:r,title:t})]},s)}function T({isOpen:s,onOpenChange:t,meme:n,onPrev:a,onNext:r,hasPrev:i,hasNext:u}){return n?e.jsx(j,{open:s,onOpenChange:t,children:e.jsxs(w,{className:"top-0 left-0 h-full w-full max-w-none translate-x-0 translate-y-0 gap-0 rounded-none border-0 bg-black/95 p-0 sm:top-[50%] sm:left-[50%] sm:h-auto sm:w-full sm:max-w-5xl sm:-translate-x-1/2 sm:-translate-y-1/2 sm:gap-4 sm:rounded-lg sm:border sm:border-neutral-800 sm:bg-black/90 sm:p-4",children:[n.type==="video"?e.jsx("video",{src:n.media_url,controls:!0,className:"h-full w-full object-contain bg-black sm:h-auto sm:max-h-[80vh] sm:rounded-lg"}):e.jsx("img",{src:n.media_url,alt:n.title,className:"h-full w-full object-contain bg-black sm:h-auto sm:max-h-[80vh] sm:rounded-lg"}),e.jsx("button",{type:"button",onClick:a,disabled:!i,className:"absolute left-3 top-1/2 -translate-y-1/2 rounded-full border border-neutral-700 bg-black/60 p-2 text-white transition disabled:opacity-40",children:e.jsx(M,{size:20})}),e.jsx("button",{type:"button",onClick:r,disabled:!u,className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-full border border-neutral-700 bg-black/60 p-2 text-white transition disabled:opacity-40",children:e.jsx(g,{size:20})})]})}):null}function q({memes:s}){const[t,n]=c.useState(null),[a,r]=c.useState(!1),i=l=>{n(l),r(!0)},u=l=>{r(l),l||n(null)},o=()=>{t!==null&&n(Math.max(0,t-1))},x=()=>{t!==null&&n(Math.min(s.length-1,t+1))},p=t!==null?s[t]:null;return e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("div",{className:"grid w-full grid-cols-2 gap-3 sm:grid-cols-3 sm:gap-4 lg:grid-cols-4",children:s.map((l,h)=>e.jsx(B,{id:l.id,title:l.title,image_url:l.image_url,media_url:l.media_url,type:l.type,onOpen:()=>i(h)}))}),e.jsx(T,{isOpen:a,onOpenChange:u,meme:p,onPrev:o,onNext:x,hasPrev:t!==null&&t>0,hasNext:t!==null&&t<s.length-1})]})}const R=[{title:"Мемчики",href:"/"}],W=[{Icon:L,target_url:"/memes/new",isActive:!1}];function Z(){const{memes:s}=y().props,[t,n]=c.useState(!0);return c.useEffect(()=>{const a=()=>n(navigator.onLine);return a(),window.addEventListener("online",a),window.addEventListener("offline",a),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",a)}},[]),e.jsxs(k,{breadcrumbs:R,actions:W,children:[e.jsx(b,{title:"Meme Cloud"}),!t&&e.jsx("div",{className:"mx-4 mb-4 rounded-2xl border border-amber-200/70 bg-amber-50 px-4 py-3 text-amber-900 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-amber-100 text-amber-700",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold",children:"Нет соединения"}),e.jsx("div",{className:"text-amber-800/80",children:"Показываем сохранённые мемы и медиа."})]})]})}),e.jsx(q,{memes:s})]})}export{Z as default};
